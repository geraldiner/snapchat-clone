(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{104:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){},110:function(e,t,c){},111:function(e,t,c){},112:function(e,t,c){},114:function(e,t,c){"use strict";c.r(t);var a=c(4),s=c.n(a),n=c(57),r=c.n(n),i=(c(97),c(74)),o=c(16),j=c(20),u=c(42),l=c(50),m=Object(l.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),b=m.actions,d=b.login,p=b.logout,O=b.selectImage,f=(b.resetImage,function(e){return e.app.user}),h=function(e){return e.app.selectedImage},g=m.reducer,x=c(83),v=c(35),w=c(76),_=c(48),N=Object(x.a)({apiKey:"AIzaSyBs6bejXhvw3Pc9VkOsyqueVoDlXt7yA_Q",authDomain:"snapchat-clone-9001.firebaseapp.com",projectId:"snapchat-clone-9001",storageBucket:"snapchat-clone-9001.appspot.com",messagingSenderId:"967823816936",appId:"1:967823816936:web:3b5481ca867d12edd8715d"}),k=Object(v.e)(N),I=Object(w.b)(N),y=Object(_.c)(N),C=new w.a,S=c(0),P=c.n(S),U=c(2),B=c(142),E=c(7),R=function(){var e=Object(j.b)(),t=function(){var t=Object(U.a)(P.a.mark((function t(){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(u.d)(I,C).then((function(t){u.a.credentialFromResult(t).accessToken;e(d({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){alert(e.message)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(E.jsx)("div",{className:"login",children:Object(E.jsxs)("div",{className:"login__container",children:[Object(E.jsx)("img",{src:"https://twemoji.maxcdn.com/2/svg/1f47b.svg",alt:"logo"}),Object(E.jsx)(B.a,{variant:"outlined",onClick:t,children:"Log In"})]})})},T=Object(l.b)({name:"camera",initialState:{cameraImage:null,status:"idle"},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),z=T.actions,F=z.setCameraImage,A=z.resetCameraImage,D=function(e){return e.camera.cameraImage},L=T.reducer,W=c(85),J=c.n(W),M=c(87),V=c.n(M),X=(c(104),{width:250,height:400,facingMode:"user"}),q=function(){var e=Object(a.useRef)(null),t=Object(j.b)(),c=Object(o.f)(),s=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(F(a)),c.push("/preview")}),[e]);return Object(E.jsxs)("div",{className:"webcam-capture",children:[Object(E.jsx)(J.a,{audio:!1,height:X.height,ref:e,screenshotFormat:"image/jpeg",width:X.width,videoConstraints:X}),Object(E.jsx)(V.a,{className:"webcam-capture__button",onClick:s,fontSize:"large"})]})},K=c(143),Q=c(129),$=c(130),G=c(131),H=c(132),Y=c(133),Z=c(134),ee=c(135),te=c(136),ce=c(137),ae=(c(108),function(){var e=Object(j.c)(D),t=Object(o.f)(),c=Object(j.b)(),s=Object(j.c)(f);Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]);var n=function(){var c=Object(U.a)(P.a.mark((function c(){var a,n,r;return P.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a=Object(K.a)(),n=Object(_.d)(y,"photos/".concat(a)),c.prev=2,c.next=5,Object(_.e)(n,e,"data_url");case 5:r=c.sent,Object(_.a)(r.ref).then(function(){var e=Object(U.a)(P.a.mark((function e(c){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(_.b)(n);case 3:return e.next=5,e.sent.timeCreated;case 5:return a=e.sent,e.next=8,Object(v.a)(Object(v.b)(k,"photos"),{imageUrl:c,username:s.username,read:!1,profilePic:s.profilePic,timestamp:a});case 8:t.push("/messages"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),console.log(c.t0);case 12:case"end":return c.stop()}}),c,null,[[2,9]])})));return function(){return c.apply(this,arguments)}}();return Object(E.jsxs)("div",{className:"preview",children:[Object(E.jsx)(Q.a,{onClick:function(){c(A())},className:"preview__close"}),Object(E.jsxs)("div",{className:"preview__toolbarRight",children:[Object(E.jsx)($.a,{}),Object(E.jsx)(G.a,{}),Object(E.jsx)(H.a,{}),Object(E.jsx)(Y.a,{}),Object(E.jsx)(Z.a,{}),Object(E.jsx)(ee.a,{}),Object(E.jsx)(te.a,{})]}),Object(E.jsx)("img",{src:e,alt:""}),Object(E.jsxs)("div",{onClick:n,className:"preview__footer",children:[Object(E.jsx)("h2",{children:"Send Now"}),Object(E.jsx)(ce.a,{className:"preview__sendIcon"})]})]})}),se=c(14),ne=c(145),re=c(139),ie=c(140),oe=c(141),je=c(138),ue=c(89),le=(c(109),function(e){var t=e.id,c=e.username,a=e.timestamp,s=e.imageUrl,n=e.read,r=e.profilePic,i=Object(j.b)(),u=Object(o.f)(),l=function(){var e=Object(U.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return i(O(s)),e.next=4,Object(v.h)(Object(v.c)(k,"photos",t),{read:!0},{merge:!0});case 4:u.push("/messages/view");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)("div",{onClick:l,className:"message",children:[Object(E.jsx)(ne.a,{className:"message__avatar",src:r}),Object(E.jsxs)("div",{className:"message__info",children:[Object(E.jsx)("h4",{children:c}),Object(E.jsxs)("p",{children:[!n&&"Tap to view - ",Object(E.jsx)(ue.a,{date:new Date(a).toUTCString()})]})]}),!n&&Object(E.jsx)(je.a,{className:"message__readIcon"})]})}),me=(c(110),function(){var e=Object(a.useState)([]),t=Object(se.a)(e,2),c=t[0],s=t[1],n=Object(j.c)(f),r=Object(j.b)(),i=Object(o.f)();return Object(a.useEffect)((function(){var e=function(){var e=Object(U.a)(P.a.mark((function e(){var t,c,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(v.g)(Object(v.b)(k,"photos"),Object(v.f)("timestamp","desc")),e.next=3,Object(v.d)(t);case 3:c=e.sent,a=[],c.forEach((function(e){a.push({id:e.id,data:e.data()})})),s(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(E.jsxs)("div",{className:"messages",children:[Object(E.jsxs)("div",{className:"messages__header",children:[Object(E.jsx)(ne.a,{src:n.profilePic,onClick:function(){return Object(u.e)(I)},className:"messages__avatar"}),Object(E.jsxs)("div",{className:"messages__search",children:[Object(E.jsx)(re.a,{className:"messages__searchIcon"}),Object(E.jsx)("input",{type:"text",placeholder:"Search contacts"})]}),Object(E.jsx)(ie.a,{className:"messages__chatIcon"})]}),Object(E.jsx)("div",{className:"messages__wrapper",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,s=c.username,n=c.timestamp,r=c.imageUrl,i=c.read;return Object(E.jsx)(le,{id:t,username:s,timestamp:n,imageUrl:r,read:i,profilePic:a},t)}))}),Object(E.jsx)(oe.a,{className:"messages__takePicIcon",onClick:function(){r(A()),i.push("/")},fontSize:"large"})]})}),be=c(88),de=(c(111),function(){var e=Object(j.c)(h),t=Object(o.f)();Object(a.useEffect)((function(){e||c()}),[e]);var c=function(){t.replace("/messages")};return Object(E.jsxs)("div",{className:"message-view",children:[Object(E.jsx)("img",{src:e,onClick:c,alt:""}),Object(E.jsx)("div",{className:"message-view__timer",children:Object(E.jsx)(be.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004477",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var t=e.remainingTime;return 0===t&&c(),t}})})]})});c(112);var pe=function(){var e=Object(j.c)(f),t=Object(j.b)();return Object(a.useEffect)((function(){Object(u.c)(I,(function(e){t(e?d({username:e.displayName,profilePic:e.photoURL,id:e.uid}):p())}))}),[]),Object(E.jsx)("div",{className:"app",children:Object(E.jsx)(i.a,{children:e?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("img",{className:"app__logo",src:"https://twemoji.maxcdn.com/2/svg/1f47b.svg",alt:"logo"}),Object(E.jsx)("div",{className:"app__body",children:Object(E.jsx)("div",{className:"app__bodyBackground",children:Object(E.jsxs)(o.c,{children:[Object(E.jsx)(o.a,{exact:!0,path:"/",component:q}),Object(E.jsx)(o.a,{exact:!0,path:"/preview",component:ae}),Object(E.jsx)(o.a,{exact:!0,path:"/messages",component:me}),Object(E.jsx)(o.a,{exact:!0,path:"/messages/view",component:de})]})})})]}):Object(E.jsx)(R,{})})})},Oe=Object(l.a)({reducer:{app:g,camera:L}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(E.jsx)(s.a.StrictMode,{children:Object(E.jsx)(j.a,{store:Oe,children:Object(E.jsx)(pe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},97:function(e,t,c){}},[[114,1,2]]]);
//# sourceMappingURL=main.d79abfaf.chunk.js.map